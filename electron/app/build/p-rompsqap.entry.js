import{r as t,c as e}from"./p-09b7a6d1.js";function n(t){return Promise.resolve((new t).easing("cubic-bezier(0.0, 0.0, 0.2, 1)").easingReverse("cubic-bezier(0.4, 0.0, 0.6, 1)").duration(300))}const i=8;function s(t,e,s){let a,r;const o=s.width+i;s.isEndSide?(a=o+"px",r="0px"):(a=-o+"px",r="0px");const d=(new t).addElement(s.menuInnerEl).fromTo("translateX",a,r),c=(new t).addElement(s.backdropEl).fromTo("opacity",.01,.32);return n(t).then(t=>t.add(d).add(c))}function a(t,e,i){let s,a;const r=i.width;i.isEndSide?(s=-r+"px",a=r+"px"):(s=r+"px",a=-r+"px");const o=(new t).addElement(i.menuInnerEl).fromTo("translateX",a,"0px"),d=(new t).addElement(i.contentEl).fromTo("translateX","0px",s),c=(new t).addElement(i.backdropEl).fromTo("opacity",.01,.32);return n(t).then(t=>t.add(o).add(c).add(d))}function r(t,e,i){const s=i.width*(i.isEndSide?-1:1)+"px",a=(new t).addElement(i.contentEl).fromTo("translateX","0px",s);return n(t).then(t=>t.add(a))}class o{constructor(n){t(this,n),this.menus=[],this.menuAnimations=new Map,this.registerAnimation("reveal",r),this.registerAnimation("push",a),this.registerAnimation("overlay",s),this.doc=e(this,"document"),this.config=e(this,"config")}async open(t){const e=await this.get(t);return!!e&&e.open()}async close(t){const e=await(void 0!==t?this.get(t):this.getOpen());return void 0!==e&&e.close()}async toggle(t){const e=await this.get(t);return!!e&&e.toggle()}async enable(t,e){const n=await this.get(e);return n&&(n.disabled=!t),n}async swipeGesture(t,e){const n=await this.get(e);return n&&(n.swipeGesture=t),n}async isOpen(t){if(null!=t){const e=await this.get(t);return void 0!==e&&e.isOpen()}return void 0!==await this.getOpen()}async isEnabled(t){const e=await this.get(t);return!!e&&!e.disabled}async get(t){if(await this.waitUntilReady(),"start"===t||"end"===t){return this.find(e=>e.side===t&&!e.disabled)||this.find(e=>e.side===t)}if(null!=t)return this.find(e=>e.menuId===t);return this.find(t=>!t.disabled)||(this.menus.length>0?this.menus[0].el:void 0)}async getOpen(){return await this.waitUntilReady(),this.getOpenSync()}async getMenus(){return await this.waitUntilReady(),this.getMenusSync()}async isAnimating(){return await this.waitUntilReady(),this.isAnimatingSync()}async registerAnimation(t,e){this.menuAnimations.set(t,e)}_getInstance(){return Promise.resolve(this)}_register(t){const e=this.menus;e.indexOf(t)<0&&(t.disabled||this._setActiveMenu(t),e.push(t))}_unregister(t){const e=this.menus.indexOf(t);e>-1&&this.menus.splice(e,1)}_setActiveMenu(t){const e=t.side;this.menus.filter(n=>n.side===e&&n!==t).forEach(t=>t.disabled=!0)}async _setOpen(t,e,n){if(this.isAnimatingSync())return!1;if(e){const e=await this.getOpen();e&&t.el!==e&&await e.setOpen(!1,!1)}return t._setOpen(e,n)}async _createAnimation(t,e){const n=this.menuAnimations.get(t);if(!n)throw new Error("animation not registered");const i=await __sc_import_app("./p-d072b193.js").then(t=>t.create(n,null,e));return this.config.getBoolean("animated",!0)||i.duration(0),i}getOpenSync(){return this.find(t=>t._isOpen)}getMenusSync(){return this.menus.map(t=>t.el)}isAnimatingSync(){return this.menus.some(t=>t.isAnimating)}find(t){const e=this.menus.find(t);if(void 0!==e)return e.el}waitUntilReady(){return Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(t=>t.componentOnReady()))}static get style(){return".menu-content{-webkit-transform:translateZ(0);transform:translateZ(0)}.menu-content-open{cursor:pointer;-ms-touch-action:manipulation;touch-action:manipulation;pointer-events:none}.ios .menu-content-reveal{-webkit-box-shadow:-8px 0 42px rgba(0,0,0,.08);box-shadow:-8px 0 42px rgba(0,0,0,.08)}[dir=rtl].ios .menu-content-reveal{-webkit-box-shadow:8px 0 42px rgba(0,0,0,.08);box-shadow:8px 0 42px rgba(0,0,0,.08)}.md .menu-content-push,.md .menu-content-reveal{-webkit-box-shadow:0 2px 22px 0 rgba(0,0,0,.09),4px 0 16px 0 rgba(0,0,0,.18);box-shadow:0 2px 22px 0 rgba(0,0,0,.09),4px 0 16px 0 rgba(0,0,0,.18)}"}}export{o as ion_menu_controller};